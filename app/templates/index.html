{% extends "base.html" %}
{% block content %}
{% if current_user.is_authenticated %}
User {{current_user.username}} now can:
<form action="/addpatent">
    <input type="submit" value="Add Item"/>
</form>
{% endif %}

<table id="data" class="table">
    <thead>
        <tr>
        {% for field in fields %}
            <th scope="col">{{ field }}</th>
        {% endfor %}
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
{% endblock %}

{% block scripts %}
  <script>
    $(document).ready(function () {
        let cols = [];
        {% for field in fields %}
            cols.push({data: '{{ field }}'.replaceAll(' ', '_')});
        {% endfor %}
        $('#data').DataTable({
            ajax: '/api/data',
            serverSide: true,
            columns: cols,
        });
    });
  </script>
{% endblock %}
